# 1 "./file_c/uart.c"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "./file_c/uart.c"
# 11 "./file_c/uart.c"
# 1 "./file_c/uart.h" 1
# 23 "./file_c/uart.h"
# 1 "./file_c/pulpino.h" 1
# 24 "./file_c/uart.h" 2
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stdint.h" 1 3 4
# 9 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stdint.h" 3 4
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 1 3 4
# 12 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 3 4
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 1 3 4







# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/features.h" 1 3 4
# 28 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/features.h" 3 4
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/_newlib_version.h" 1 3 4
# 29 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/features.h" 2 3 4
# 9 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 2 3 4
# 41 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4

# 41 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef signed char __int8_t;

typedef unsigned char __uint8_t;
# 55 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef short int __int16_t;

typedef short unsigned int __uint16_t;
# 77 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef long int __int32_t;

typedef long unsigned int __uint32_t;
# 103 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef long long int __int64_t;

typedef long long unsigned int __uint64_t;
# 134 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef signed char __int_least8_t;

typedef unsigned char __uint_least8_t;
# 160 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef short int __int_least16_t;

typedef short unsigned int __uint_least16_t;
# 182 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef long int __int_least32_t;

typedef long unsigned int __uint_least32_t;
# 200 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef long long int __int_least64_t;

typedef long long unsigned int __uint_least64_t;
# 214 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/machine/_default_types.h" 3 4
typedef long long int __intmax_t;







typedef long long unsigned int __uintmax_t;







typedef int __intptr_t;

typedef unsigned int __uintptr_t;
# 13 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 2 3 4
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/_intsup.h" 1 3 4
# 35 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/_intsup.h" 3 4
       
       
       
       
       
       
       
       
# 190 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/_intsup.h" 3 4
       
       
       
       
       
       
       
       
# 14 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 2 3 4
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/_stdint.h" 1 3 4
# 20 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/sys/_stdint.h" 3 4
typedef __int8_t int8_t ;



typedef __uint8_t uint8_t ;







typedef __int16_t int16_t ;



typedef __uint16_t uint16_t ;







typedef __int32_t int32_t ;



typedef __uint32_t uint32_t ;







typedef __int64_t int64_t ;



typedef __uint64_t uint64_t ;






typedef __intmax_t intmax_t;




typedef __uintmax_t uintmax_t;




typedef __intptr_t intptr_t;




typedef __uintptr_t uintptr_t;
# 15 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 2 3 4






typedef __int_least8_t int_least8_t;
typedef __uint_least8_t uint_least8_t;




typedef __int_least16_t int_least16_t;
typedef __uint_least16_t uint_least16_t;




typedef __int_least32_t int_least32_t;
typedef __uint_least32_t uint_least32_t;




typedef __int_least64_t int_least64_t;
typedef __uint_least64_t uint_least64_t;
# 51 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 3 4
  typedef int int_fast8_t;
  typedef unsigned int uint_fast8_t;
# 61 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 3 4
  typedef int int_fast16_t;
  typedef unsigned int uint_fast16_t;
# 71 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 3 4
  typedef int int_fast32_t;
  typedef unsigned int uint_fast32_t;
# 81 "/home/barneyzhu/riscv/riscv-gnu-toolchain/riscv32-unknown-elf/include/stdint.h" 3 4
  typedef long long int int_fast64_t;
  typedef long long unsigned int uint_fast64_t;
# 10 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stdint.h" 2 3 4
# 25 "./file_c/uart.h" 2
# 66 "./file_c/uart.h"

# 66 "./file_c/uart.h"
void uart_set_cfg(int parity, uint16_t clk_counter);

void uart_send(const char* str, unsigned int len);
void uart_sendchar(const char c);

char uart_getchar();

void uart_wait_tx_done(void);
# 12 "./file_c/uart.c" 2
# 1 "./file_c/utils.h" 1
# 25 "./file_c/utils.h"
# 1 "./file_c/event.h" 1
# 26 "./file_c/utils.h" 2


static inline int get_core_id()
{
  return 0;
}


static inline int get_core_num()
{
  return 0;
}
# 68 "./file_c/utils.h"
static inline void sleep(void) {
  *(volatile int*) (( ( 0x10000000 + 0xA100000 ) + 0x4000 ) + 0x20) = 0x01;
  asm volatile ("nop;nop;wfi");
}
# 95 "./file_c/utils.h"
void exit(int i);


void eoc(int i);


void sleep_busy(volatile int);
# 13 "./file_c/uart.c" 2


# 1 "./file_c/string_lib.h" 1
# 14 "./file_c/string_lib.h"
# 1 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 1 3 4
# 143 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 3 4

# 143 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 3 4
typedef int ptrdiff_t;
# 209 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 3 4
typedef unsigned int size_t;
# 321 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 3 4
typedef int wchar_t;
# 415 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 3 4
typedef struct {
  long long __max_align_ll __attribute__((__aligned__(__alignof__(long long))));
  long double __max_align_ld __attribute__((__aligned__(__alignof__(long double))));
# 426 "/home/barneyzhu/riscv/riscv-gnu-toolchain/lib/gcc/riscv32-unknown-elf/10.2.0/include/stddef.h" 3 4
} max_align_t;
# 15 "./file_c/string_lib.h" 2
# 23 "./file_c/string_lib.h"

# 23 "./file_c/string_lib.h"
size_t strlen (const char *str);
int strcmp (const char *s1, const char *s2);
char* strcpy (char *s1, const char *s2);
int puts(const char *s);
int printf(const char *format, ...);
void * memset (void *dest, int val, size_t len);
int putchar(int s);
# 16 "./file_c/uart.c" 2
# 29 "./file_c/uart.c"
void uart_set_cfg(int parity, uint16_t clk_counter) {
  unsigned int i;
  *(unsigned volatile int*) (( ( 0x10000000 + 0xA100000 ) + 0x7000 ) + 0x04) |= (1 << 0x01);
  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x0C)) = 0x83;
  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x04)) = (clk_counter >> 8) & 0xFF;
  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x00)) = clk_counter & 0xFF;
  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x08)) = 0xA7;
  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x0C)) = 0x03;

  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x04)) = ((*(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x04))) & 0xF0) | 0x02;
}

void uart_send(const char* str, unsigned int len) {
  unsigned int i;
# 52 "./file_c/uart.c"
  while(len > 0) {



    while( (*(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x14)) & 0x20) == 0);

    for(i = 0; (i < 64) && (len > 0); i++) {

      *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x00)) = *str++;

      len--;
    }
  }
}

char uart_getchar() {
  while((*((volatile int*)( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x14)) & 0x1) != 0x1);

  return *(volatile int*)( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x00);
}

void uart_sendchar(const char c) {

  while( (*(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x14)) & 0x20) == 0);


  *(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x00)) = c;
}

void uart_wait_tx_done(void) {

  while( (*(volatile unsigned int*)(( ( ( 0x10000000 + 0xA100000 ) + 0x0000 ) + 0x14)) & 0x40) == 0);
}
